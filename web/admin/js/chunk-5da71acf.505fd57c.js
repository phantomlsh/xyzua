(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5da71acf"],{3751:function(e,t,a){"use strict";var s=a("73f0"),r=a.n(s);r.a},"43ef":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record"},[a("h1",[e._v("Record")]),e._l(e.mapRecord,function(t){return a("div",{staticClass:"edit"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.key)+":")]),"int"!=e.$model.type[e.currTable][t.key]&&"time"!=e.$model.type[e.currTable][t.key]?a("el-input",{attrs:{disabled:"disable"==e.$model.type[e.currTable][t.key]},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"r.value"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-menu"},on:{click:function(a){return e.auto(t)}},slot:"append"})],1):e._e(),"int"==e.$model.type[e.currTable][t.key]?a("el-input-number",{staticStyle:{"min-width":"220px",width:"50%"},attrs:{disabled:"Id"==t.key},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"r.value"}}):e._e(),"time"==e.$model.type[e.currTable][t.key]?a("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"r.value"}}):e._e()],1)}),a("div",{staticClass:"row"},[a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary",plain:""},on:{click:e.save}},[e._v("Save to Local")]),e.record.Id?a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:e.update}},[e._v("Save and Update")]):e._e(),a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"success"},on:{click:e.create}},[e._v("Save and Create")]),e.record.Id?a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"danger"},on:{click:e.remove}},[e._v("Delete")]):e._e()],1)],2)},r=[],i=a("2f62");function c(e){var t={};for(let a in e)"Id"!=a&&(e[a]instanceof Date?(t[a]=Math.floor(e[a].getTime()/1e3),console.log(a+t[a])):t[a]=e[a]);return t}var o={name:"Record",data(){return{mapRecord:[]}},created:function(){this.get(),this.mapping()},watch:{currTable(){this.mapping()},record(){this.mapping()}},computed:{...Object(i["c"])(["record","currTable"])},methods:{...Object(i["b"])(["setRecord"]),mapping(){this.mapRecord=[];for(let e in this.$model.keys[this.currTable]){let t=this.$model.keys[this.currTable][e];this.mapRecord.push({key:t,value:this.record[t]})}},auto(e){let t=this.$model.type[this.currTable][e.key],a=t.match(/random\((\d+)\)/);a?e.value=this.$util.randomString(a[1]):"password"!=t||(e.value=this.$util.hash(e.value,"XYZUA_Powered_by_Phantomlsh"))},save(){let e={};for(let t in this.mapRecord){let a=this.mapRecord[t];e[a.key]=a.value}this.setRecord(e)},get(){window.localStorage;this.record.Id&&this.$ajax.get("../v1/"+this.currTable+"/"+this.record.Id,{params:{...this.$model.addParams()}}).then(e=>{this.setRecord(e.data),this.$message({message:"Get Record!",type:"success"})}).catch(()=>{this.$message.error("Get Data Fail!")})},update(){this.checkForm()?(this.save(),this.$ajax.put("../v1/"+this.currTable+"/"+this.record.Id,{...c(this.record),...this.$model.addParams()}).then(e=>{this.$message(e.data),this.get()}).catch(()=>{this.$message.error("Id Non-Exist!")})):this.$message.error("Please Complete Form!")},create(){this.checkForm()?(this.save(),this.$ajax.post("../v1/"+this.currTable,{...c(this.record),...this.$model.addParams()}).then(e=>{"string"==typeof e.data?this.$message.error(e.data):(this.setRecord(e.data),this.get(),this.$message({message:"Created!",type:"success"}))}).catch(function(){this.$message.error("Id Non-Exist!")})):this.$message.error("Please Complete Form!")},remove(){this.$ajax.delete("../v1/"+this.currTable+"/"+this.record.Id,{params:{...this.$model.addParams()}}).then(e=>{this.setRecord({}),this.$message("Deleted")}).catch(function(){this.$message.error("Id Non-Exist!")})},checkForm(){for(let e in this.mapRecord){let t=this.mapRecord[e];if("Id"!=t.key&&(""===t.value||"undefined"==typeof t.value))return!1}return!0}}},l=o,d=(a("3751"),a("2877")),n=Object(d["a"])(l,s,r,!1,null,"230e42b3",null);t["default"]=n.exports},"73f0":function(e,t,a){}}]);
//# sourceMappingURL=chunk-5da71acf.505fd57c.js.map