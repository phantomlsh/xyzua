{"version":3,"sources":["webpack:///./src/views/Record.vue?fa25","webpack:///./src/views/Record.vue?a481","webpack:///src/views/Record.vue","webpack:///./src/views/Record.vue?6c2b","webpack:///./src/views/Record.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Record_vue_vue_type_style_index_0_id_230e42b3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Record_vue_vue_type_style_index_0_id_230e42b3_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","r","staticStyle","margin-right","_s","key","$model","type","currTable","attrs","disabled","model","value","callback","$$v","$set","expression","slot","icon","on","click","$event","auto","_e","min-width","width","placeholder","margin","plain","save","record","update","create","remove","staticRenderFns","processRecord","obj","res","Date","Math","floor","getTime","console","log","Recordvue_type_script_lang_js_","name","[object Object]","mapRecord","created","get","mapping","watch","computed","Object","vuex_esm","methods","i","keys","k","push","random","match","$util","randomString","hash","j","setRecord","window","localStorage","Id","$ajax","params","addParams","then","resp","data","$message","message","catch","error","checkForm","put","post","delete","views_Recordvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-5da71acf.505fd57c.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Record.vue?vue&type=style&index=0&id=230e42b3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Record.vue?vue&type=style&index=0&id=230e42b3&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"record\"},[_c('h1',[_vm._v(\"Record\")]),_vm._l((_vm.mapRecord),function(r){return _c('div',{staticClass:\"edit\"},[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(r.key)+\":\")]),(_vm.$model.type[_vm.currTable][r.key] != 'int' && _vm.$model.type[_vm.currTable][r.key] != 'time')?_c('el-input',{attrs:{\"disabled\":_vm.$model.type[_vm.currTable][r.key] == 'disable'},model:{value:(r.value),callback:function ($$v) {_vm.$set(r, \"value\", $$v)},expression:\"r.value\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-menu\"},on:{\"click\":function($event){return _vm.auto(r)}},slot:\"append\"})],1):_vm._e(),(_vm.$model.type[_vm.currTable][r.key] == 'int')?_c('el-input-number',{staticStyle:{\"min-width\":\"220px\",\"width\":\"50%\"},attrs:{\"disabled\":r.key == 'Id'},model:{value:(r.value),callback:function ($$v) {_vm.$set(r, \"value\", $$v)},expression:\"r.value\"}}):_vm._e(),(_vm.$model.type[_vm.currTable][r.key] == 'time')?_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"Select date and time\"},model:{value:(r.value),callback:function ($$v) {_vm.$set(r, \"value\", $$v)},expression:\"r.value\"}}):_vm._e()],1)}),_c('div',{staticClass:\"row\"},[_c('el-button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save to Local\")]),(_vm.record.Id)?_c('el-button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.update}},[_vm._v(\"Save and Update\")]):_vm._e(),_c('el-button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.create}},[_vm._v(\"Save and Create\")]),(_vm.record.Id)?_c('el-button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"danger\"},on:{\"click\":_vm.remove}},[_vm._v(\"Delete\")]):_vm._e()],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"record\">\r\n    <h1>Record</h1>\r\n    <div class=\"edit\" v-for=\"r in mapRecord\">\r\n      <span style=\"margin-right: 10px;\">{{r.key}}:</span>\r\n      <el-input v-model=\"r.value\"\r\n        v-if=\"$model.type[currTable][r.key] != 'int' && $model.type[currTable][r.key] != 'time'\"\r\n        :disabled=\"$model.type[currTable][r.key] == 'disable'\"\r\n      >\r\n        <el-button @click=\"auto(r)\" slot=\"append\" icon=\"el-icon-menu\"></el-button>\r\n      </el-input>\r\n      <el-input-number v-model=\"r.value\"\r\n        v-if=\"$model.type[currTable][r.key] == 'int'\"\r\n        :disabled=\"r.key == 'Id'\"\r\n        style=\"min-width: 220px;width: 50%;\"\r\n      ></el-input-number>\r\n      <el-date-picker v-model=\"r.value\"\r\n        v-if=\"$model.type[currTable][r.key] == 'time'\"\r\n        type=\"datetime\"\r\n        placeholder=\"Select date and time\"\r\n      ></el-date-picker>\r\n    </div>\r\n    <div class=\"row\">\r\n      <el-button style=\"margin: 10px;\" @click=\"save\" type=\"primary\" plain>Save to Local</el-button>\r\n      <el-button style=\"margin: 10px;\" v-if=\"record.Id\" @click=\"update\" type=\"primary\">Save and Update</el-button>\r\n      <el-button style=\"margin: 10px;\" @click=\"create\" type=\"success\">Save and Create</el-button>\r\n      <el-button style=\"margin: 10px;\" v-if=\"record.Id\" @click=\"remove\" type=\"danger\">Delete</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nfunction processRecord(obj) {\r\n  var res = {};\r\n  for (let key in obj) {\r\n    if (key == \"Id\") continue;\r\n    if (obj[key] instanceof Date) {\r\n      res[key] = Math.floor(obj[key].getTime() / 1000);\r\n      console.log(key + res[key]);\r\n      continue;\r\n    }\r\n    res[key] = obj[key];\r\n  }\r\n  return res;\r\n}\r\n\r\nexport default {\r\n  name: 'Record',\r\n  data() {\r\n    return {\r\n      mapRecord: []\r\n    }\r\n  },\r\n  created: function() {\r\n    this.get();\r\n    this.mapping();\r\n  },\r\n  watch: {\r\n    currTable() {this.mapping();},\r\n    record() {this.mapping();}\r\n  },\r\n  computed: {\r\n    ...mapState(['record', 'currTable'])\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setRecord']),\r\n    mapping() {\r\n      this.mapRecord = [];\r\n      for (let i in this.$model.keys[this.currTable]) {\r\n        let k = this.$model.keys[this.currTable][i];\r\n        this.mapRecord.push({\r\n          key: k,\r\n          value: this.record[k]\r\n        })\r\n      }  \r\n    },\r\n    auto(r) {\r\n      let type = this.$model.type[this.currTable][r.key];\r\n      let random = type.match(/random\\((\\d+)\\)/);\r\n      if (random) {\r\n        r.value = this.$util.randomString(random[1]);\r\n        return ;\r\n      }\r\n      if (type == \"password\") {\r\n        r.value = this.$util.hash(r.value, \"XYZUA_Powered_by_Phantomlsh\");\r\n        return ;\r\n      }\r\n    },\r\n    save() {\r\n      let r = {};\r\n      for (let i in this.mapRecord) {\r\n        let j = this.mapRecord[i];\r\n        r[j.key] = j.value;\r\n      }\r\n      this.setRecord(r);\r\n    },\r\n    get() {\r\n      var storage = window.localStorage;\r\n      if (!this.record.Id) return;\r\n      this.$ajax\r\n        .get(\"../v1/\" + this.currTable + \"/\" + this.record.Id, {\r\n          params: {\r\n            ...this.$model.addParams()\r\n          }\r\n        })\r\n        .then(resp => {\r\n          this.setRecord(resp.data);\r\n          this.$message({message: \"Get Record!\", type: \"success\"});\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"Get Data Fail!\");\r\n        })\r\n    },\r\n    update() {\r\n      if (!this.checkForm()) {\r\n        this.$message.error(\"Please Complete Form!\");\r\n        return;\r\n      }\r\n      this.save();\r\n      this.$ajax\r\n        .put(\"../v1/\" + this.currTable + \"/\" + this.record.Id, {\r\n          ...processRecord(this.record),\r\n          ...this.$model.addParams()\r\n        })\r\n        .then(resp => {\r\n          this.$message(resp.data);\r\n          this.get();\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(\"Id Non-Exist!\");\r\n        })\r\n    },\r\n    create() {\r\n      if (!this.checkForm()) {\r\n        this.$message.error(\"Please Complete Form!\");\r\n        return;\r\n      }\r\n      this.save();\r\n      this.$ajax\r\n        .post(\"../v1/\" + this.currTable, {\r\n          ...processRecord(this.record),\r\n          ...this.$model.addParams()\r\n        })\r\n        .then(resp => {\r\n          if (typeof resp.data == 'string') {\r\n            this.$message.error(resp.data);\r\n          } else {\r\n            this.setRecord(resp.data);\r\n            this.get();\r\n            this.$message({message: 'Created!', type: 'success'});\r\n          }\r\n        })\r\n        .catch(function() {\r\n          this.$message.error(\"Id Non-Exist!\");\r\n        })\r\n    },\r\n    remove() {\r\n      this.$ajax\r\n        .delete(\"../v1/\" + this.currTable + '/' + this.record.Id, {\r\n          params: {\r\n            ...this.$model.addParams()\r\n          }\r\n        })\r\n        .then(resp => {\r\n          this.setRecord({});\r\n          this.$message('Deleted');\r\n        })\r\n        .catch(function() {\r\n          this.$message.error(\"Id Non-Exist!\");\r\n        })\r\n    },\r\n    checkForm() { // check blank form\r\n      for (let i in this.mapRecord) {\r\n        let r = this.mapRecord[i];\r\n        if (r.key == 'Id') continue;\r\n        if (r.value === '' || typeof r.value == 'undefined') return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\ndiv.record {\r\n  padding-top: 20px;\r\n  width: 90%;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\ndiv.edit {\r\n  width: 100%;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  margin: 10px 0;\r\n}\r\n\r\ndiv.row {\r\n  width: 90%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  flex-wrap: wrap;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Record.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Record.vue?vue&type=template&id=230e42b3&scoped=true&\"\nimport script from \"./Record.vue?vue&type=script&lang=js&\"\nexport * from \"./Record.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Record.vue?vue&type=style&index=0&id=230e42b3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"230e42b3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}